# app/api/routers/slip.py (simplified)
from fastapi import APIRouter, HTTPException, Depends
from typing import List
from datetime import datetime
from pydantic import BaseModel

router = APIRouter()

# Simple schemas
class SlipCreate(BaseModel):
    selections: List[dict]
    stake: float

class SlipResponse(BaseModel):
    id: int
    selections: List[dict]
    total_odds: float
    created_at: datetime

# Mock database
slips_db = []
next_id = 1

@router.get("/", response_model=List[SlipResponse])
async def get_slips(skip: int = 0, limit: int = 100):
    """Get all slips."""
    return slips_db[skip:skip + limit]

@router.post("/", response_model=SlipResponse)
async def create_slip(slip: SlipCreate):
    """Create a new slip."""
    global next_id
    slip_data = {
        "id": next_id,
        "selections": slip.selections,
        "total_odds": 1.0,  # Calculate this
        "created_at": datetime.now(),
        "stake": slip.stake
    }
    slips_db.append(slip_data)
    next_id += 1
    return slip_data